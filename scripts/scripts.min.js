import{ctaClick as u}from"../dl.min.js";import{sampleRUM as i,loadHeader as m,loadFooter as h,decorateButtons as y,decorateIcons as w,decorateSections as g,decorateBlocks as x,decorateTemplateAndTheme as A,waitForLCP as E,loadBlocks as L,loadCSS as l,fetchPlaceholders as v,getMetadata as d,getExtension as r}from"./aem.min.js";const S=[];export function createElement(e,t,o,n){const c=document.createElement(e);if(t){const a=typeof t=="string"?[t]:t;c.classList.add(...a)}if(o&&Object.keys(o).forEach(a=>{c.setAttribute(a,o[a])}),n){const a=s=>{s instanceof HTMLElement||s instanceof SVGElement?c.append(s):c.insertAdjacentHTML("beforeend",s)};Array.isArray(n)?n.forEach(a):a(n)}return c}const f=location.pathname.replace(".html","").split("/");export const targetObject={model:null,isMobile:window.matchMedia("(max-width: 767px)").matches,ctaPosition:"Top Menu Bar",ctaPosition:"Top Menu Bar",pageName:f[f.length-1]||"home-page",isTab:window.matchMedia("(max-width: 1024px)").matches};function $(e,t=""){e.querySelectorAll("a").forEach(n=>{const{href:c}=n;let a="";if(c.includes("/play.google.com-s/")?n.href=c.replace("play.google.com-s","play.google.com"):c.includes("/apps.apple.com-s/")?n.href=c.replace("apps.apple.com-s","apps.apple.com"):c.includes("play.google.com")?a="playstore":c.includes("apps.apple.com")&&(a="appstore"),a){n.textContent="";const s=document.createElement("img");s.src=`${window.hlx.codeBasePath}${t}/images/${a}.webp`,s.alt=n.title,s.loading="lazy",n.appendChild(s)}})}window.addEventListener("resize",()=>{targetObject.isTab=window.matchMedia("(max-width: 1024px)").matches});export async function decoratePlaceholder(e,t){try{const o=await v(t);return e.querySelectorAll("*").forEach((n,c)=>{n.firstChild instanceof Text&&Object.keys(o).forEach(a=>{var s=o[a];s&&s.trim()&&n.firstChild.textContent.trim()&&n.firstChild.textContent.includes(`{${a}}`)&&(n.innerHTML=n.firstChild.textContent.replaceAll(`{${a}}`,s))})}),e.innerHTML}catch(o){console.warn(o)}}export async function decorateAnchorTag(e){try{e.querySelectorAll("a").forEach(t=>{const o=document.body;I(t,o)})}catch(t){console.warn(t)}}async function p(){await l(`${window.hlx.codeBasePath}/styles/fonts${r("css")}`);try{window.location.hostname.includes("localhost")||sessionStorage.setItem("fonts-loaded","true")}catch{}}function B(e){e.addEventListener("click",async t=>{const o=t.target.closest("a");if(o&&o.href&&o.href.includes("/modals/")){t.preventDefault();const{openModal:n}=await import(`${window.hlx.codeBasePath}/blocks/modal/modal${r("js")}`);n(o.href)}})}function z(){}export async function decorateMain(e){decorateAnchorTag(e),decoratePlaceholder(e),y(e),w(e),g(e),x(e),$(e),handleReadAll(e)}async function b(e){document.documentElement.lang="en",A();const t=e.querySelector("main");t&&(decorateMain(t),document.body.classList.add("appear"),await E(S));try{(window.innerWidth>=900||sessionStorage.getItem("fonts-loaded"))&&p()}catch{}}async function C(e){B(e);const t=d("template");t&&await M(e,t);const o=e.querySelector("main");await L(o);const{hash:n}=window.location,c=n?e.getElementById(n.substring(1)):!1;n&&c&&c.scrollIntoView(),m(e.querySelector("header")),h(e.querySelector("footer")),l(`${window.hlx.codeBasePath}/styles/lazy-styles.css`),p(),i("lazy"),i.observe(o.querySelectorAll("div[data-block-name]")),i.observe(o.querySelectorAll("picture > img"))}function T(){window.setTimeout(()=>import("./delayed.min.js"),3e3);const e=new Event("load-event");document.dispatchEvent(e),import("./sidekick.min.js").then(({initSidekick:t})=>t())}async function M(e,t){try{const o=new Promise(c=>{l(`${window.hlx.codeBasePath}/templates/${t}/${t}${r("css")}`,c)}),n=new Promise(c=>{(async()=>{try{const a=await import(`../templates/${t}/${t}${r("js")}`);a.default&&await a.default(e)}catch(a){console.log(`failed to load module for ${t}`,a)}c()})()});await Promise.all([o,n])}catch(o){console.log(`failed to load block ${t}`,o)}}async function P(){await k(),await b(document),await C(document),T()}P();async function k(){const e=[`${window.hlx.codeBasePath}/styles/reset${r("css")}`];d("template")||e.push(`${window.hlx.codeBasePath}/styles/common/common${r("css")}`),e.forEach(async t=>{await l(t)})}export function handleReadAll(e){try{e.querySelector(".section.carousel-articles-wrapper").querySelector(".default-content-wrapper p a").addEventListener("click",q)}catch{}}function q(e){try{if(e.target.closest(".section.read-all-dl")){const t=e.target.textContent.trim(),o=e.target.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim();u(t,"",o,targetObject.pageName)}}catch{console.log("read all not found Analytics")}}function O(e){return Array.from(e.classList).find(t=>t.startsWith("neeyat-button-"))?.replace("neeyat-button-","")||0}const I=(e,t)=>{e.innerHTML.includes("<sub>")&&(e.target="_blank"),e.href.includes("/modal-popup/")&&H(e,t)},H=(e,t)=>{const o=e.href.split("/").pop();e.dataset.modelId=o,targetObject.modelId=o,e.dataset.href=e.href,e.href="javascript:void(0)",e.addEventListener("click",n=>{n.preventDefault();const c=document.querySelectorAll(`.${o}`);targetObject.models=c,c.length&&(c.forEach(a=>{a.classList.add("dp-none"),a.remove(),t.prepend(a),a.classList.remove("dp-none"),a.classList.add("overlay");const s=a.querySelector("em");s?.innerHTML.includes(":cross-icon")&&(s.innerHTML="",s.addEventListener("click",()=>{a.classList.remove("overlay"),a.classList.add("dp-none")}))}),t.style.overflow="hidden")})};
