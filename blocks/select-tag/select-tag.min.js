import{getProps as x}from"../../scripts/common.min.js";import{loader as M}from"../loader/loader.min.js";import{getSelectedLanguage as u,getLanguageByLocation as S,getLanguageByState as H}from"./getSelectedLanguage.min.js";const $=await u("english");let L={};export default async function B(e){L=await H();const{location:l,countryName:s}=await S(),[i,g,a,w,,b]=x(e);let f=L[l]||L.default;s&&s.toLowerCase()!="india"&&(f="english");let o=await u(f,b);o=await C($,o);const E=g.split(","),h=a.split(","),A=w.split(","),m=document.createElement("div");m.classList.add("maindiv-lang-switch");const n=document.createElement("div");n.classList.add("inner-lang-switch"),n.innerHTML="<p>Change language</p>";const t=document.createElement("ul");t.name=i;let v="";E.forEach((c,d)=>{const r=A[d]===h[d]?' data-disabled="false" ':"",p=f.toLowerCase()===h[d]?.toLowerCase()?"Select":"";p&&(n.children[0].innerText="Change language"),v+=`  <li class="items ${p}" ${r} data-value="${h[d]}">${c}</li>`}),t.innerHTML=v,e.innerHTML="",Array.from(t.children).forEach(c=>{c.addEventListener("click",async function(d){const r=this.dataset.value;if(this.getAttribute("data-disabled")==null&&t.firstElementChild.setAttribute("data-disabled",!0),this.getAttribute("data-disabled"))t.classList.add("dp-none");else{Array.from(t.children).forEach(T=>{T.classList.remove("active")}),this.classList.add("active"),n.children[0].innerText=r,t.classList.add("dp-none");const y=await u(r);o=await C(o,y)}window.matchMedia("(max-width <= 1024px)").matches&&(t.style.left="-80px")})}),n.addEventListener("click",c=>{t.classList.contains("dp-none")?t.classList.remove("dp-none"):t.classList.add("dp-none")}),t.classList.add("dp-none"),m.append(n,t),t.firstElementChild.classList.add("active"),e.append(m),M(!1)}function C(e,l){let s=!1;return document.querySelector("main").querySelectorAll("*").forEach((i,g)=>{i.firstChild instanceof HTMLAnchorElement?Object.keys(e).forEach(a=>{e[a]&&e[a].trim()===new URL(i.firstChild.href.trim()).pathname&&(i.firstChild.href=l[a],s=!0,console.log(i))}):i.firstChild instanceof Text&&Object.keys(e).forEach(a=>{e[a]&&e[a].trim()===i.firstChild.textContent.trim()&&(i.firstChild.textContent=l[a],s=!0)})}),s?l:e}
