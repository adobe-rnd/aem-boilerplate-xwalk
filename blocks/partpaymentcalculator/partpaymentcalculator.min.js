import{CFApiCall as s}from"../../scripts/common.min.js";import{homeLoanCalcFunc as u}from"../emiandeligiblitycalc/homeloancalculators.min.js";import{onloadDatePickerCalls as d}from"./partpaymentdatepicker.min.js";import{partPaymentCalHTML as p}from"./partpaymenttemplate.min.js";export default async function f(a){const e=a.textContent.trim(),t=(await s(e)).data,o=C(t);a.innerHTML=p(o);let c,l;try{c=document.querySelector(".home-page-calculator-call-xf"),l=c.querySelector(".cmp-container--caloverlay");const r=document.querySelector(".home-page-calculator-call-xf");document.querySelector(".home-loan-calculator-parent").classList.contains("combined-emi-eligibility")&&document.querySelector(".home-loan-calculator-parent").classList.remove("combined-emi-eligibility"),u(r),d(),y(a)}catch(r){console.warn(r)}}function y(a){if(document.querySelector(".discalimer-details").classList.remove("dp-none"),a.querySelector(".discalimer-calc")){const e=a.querySelector(".read-more-discalimer-calc"),i=a.querySelector(".disclaimer-container");e.addEventListener("click",t=>{t.target.textContent.trim()=="Read more"?(i.classList.remove("dp-none"),e.textContent="Read less"):t.target.textContent.trim()=="Read less"&&(i.classList.add("dp-none"),e.textContent="Read more")})}}function C(a){var e={};return a.forEach(function(i){const{Fieldset:t,Name:o,Type:c,Value:l,ID:r,View:m}=i;if(c==="partpayment"&&(m==="array"&&(e[o]=e[o]||[]),r)){e.partpayment=e.partpayment||[];let n=e.partpayment[r]||{};n[o]=l,e.partpayment[r]=n}if(t)if(e[t]||(e[t]={}),c==="loanamout"){e[t].loanamout||(e[t].loanamout=[]);let n=e[t].loanamout[r];n||(n={},e[t].loanamout[r]=n),n[o]=l}else c==="array"?e[t][o]=[]:e[t][o]=l;else e[o]=l}),e}
