import{currenyCommaSeperation as s}from"../../scripts/common.min.js";function I(c,t,n,e,o){document.querySelector("[data-cal-result=principalAmt]").innerText=s(o||0),document.querySelector("[data-cal-result=interestAmt]").innerText=s(c),document.querySelector(".amount-1").innerText=`${Number(t).toFixed(2)}%`,document.querySelector(".amount-2").innerText=s(n),document.querySelector(".amount-3").innerText=`${e} Months`}export function updatePartPayment(c,t,n,e){const o=t.replace(/,/g,""),r=c/12;let u=1,i=0;t=t.replace(/,/g,""),n=n;const l=P(t,r,n);if(e.length==0){const h=l*n*12-o+Number(o);I(l,c,0,0,h);return}for(let d=0;d<=n*12-1;d++){let h=0;for(let y=0;y<e.length;y++)e[y].monthDifference===d+1&&(h=e[y].partPayAmount.replace(/,/g,""));const x=Math.round(r/100*t),b=+l-+x+ +h;t-=b,t>=0&&(u+=1,i+=x)}const m=n*12-u,f=l*12*n-o-i,M=q(n,l,f,o),S=i+Number(o);I(l,M,f,m,S)}function P(c,t,n){const e=t/100,o=n*12,r=c*e/(1-(1+e)**-o);return Math.round(r)}function q(c,t,n,e,o){if(t>0&&e>0)return(A(c*12,-t,+e+n,0,0,.1)*1200).toFixed(2)}function A(c,t,n,e,o,r){e=typeof e<"u"?e:0,o=typeof o<"u"?o:0,r=typeof r<"u"?r:.1;let u=0,i=1;const l=Math.abs(5e-8*t);for(let m=0;m<40;m++){let a=n;for(let f=0;f<c;f++)o==0?a=a*(1+r)+t:a=(a+t)*(1+r);if(Math.abs(a+e)<l)return r;a+e>0?i=r:u=r,r=(i+u)/2}return null}
