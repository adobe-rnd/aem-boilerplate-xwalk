import{CFApiCall as p,groupAllKeys as u}from"../../scripts/common.min.js";import{featureDropDownClick as f}from"../keyfeatures/keyfeatures.min.js";import{setLocationObj as m}from"../moredetailsaddress/moredetailsaddress.min.js";export default async function d(n){const{geoInfo:{city:s}}=m,o=n.textContent.trim(),a=document.createElement("div");let t="";if(sessionStorage.getItem("branchloanmapping"))t=JSON.parse(sessionStorage.getItem("branchloanmapping"));else{if(!o)return!1;const e=o&&await p(o),r=e&&e.data;t=u(r),sessionStorage.setItem("branchloanmapping",JSON.stringify(t))}Object.keys(t).forEach(e=>{if(t[e].includes(s)){const r=document.querySelector(`.${e}-key-feature`);r&&r.querySelectorAll(".keyfeatures-wrapper").forEach(i=>{a.append(i)})}else e=="personal-loan"&&document.querySelector(".personal-loan-key-feature").querySelector(".wrapper-creation-container").querySelectorAll(".keyfeatures-wrapper").forEach(function(r){r.remove()})}),document.querySelectorAll(".loans-fragment").forEach(e=>{e.remove()}),document.querySelector(".view-more-less-js .wrapper-creation-container").insertAdjacentHTML("beforeend",a.innerHTML);let c=document.querySelector(".view-more-less-js.wrappercreation-container");document.querySelectorAll(".view-more-less-js .wrapper-creation-container .keyfeatures-wrapper").length>0?document.querySelectorAll(".view-more-less-js .wrapper-creation-container .keyfeatures-wrapper").forEach((e,r)=>{r<=2?e.classList.remove("dp-none"):e.classList.add("dp-none")}):c.classList.add("dp-none");const l=document.querySelector(".view-more-less-js .wrapper-creation-container");try{f(l)}catch(e){console.warn(e)}n.classList.add("dp-none")}
