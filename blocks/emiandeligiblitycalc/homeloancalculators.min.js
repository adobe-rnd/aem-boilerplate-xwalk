import{currenyCommaSeperation as w}from"../../scripts/common.min.js";import{resetCalculator as C}from"./resetCalculator.min.js";export function homeLoanCalcFunc(a){const k=a.querySelectorAll(".onetab"),g=a.querySelectorAll(".twotab"),I=a.querySelectorAll(".input_salary_checkbox"),F=a.querySelectorAll(".input_business_checkbox");k.forEach((e,l)=>{e.addEventListener("click",()=>{h(e,!0,l)})}),g.forEach((e,l)=>{e.addEventListener("click",()=>{h(e,!1,l)})});function h(e,l,t){const A=e.closest(".home-loan-calculator-parent"),p=e.parentElement.closest(".home-loan-calculator-parent ").nextElementSibling,u=l?I[t]:F[t],s=a.querySelector("#document-required-container"),n=a.querySelectorAll(".cmp-text--doc-salary"),c=a.querySelectorAll(".cmp-text--doc-business");u.checked=!0,e.style.background=l?"#fff7f4":"#eef3ff";const d=l?g[t]:k[t];d.style.background="#ffffff",p.style.background=l?"#fff7f4":"#eef3ff",A.style.background=l?"-webkit-linear-gradient(right, #fff 50%, #fff7f4 50%)":"-webkit-linear-gradient(right, #eef3ff 50%, #fff 50%)",s&&(s.style.background=l?"#fff7f4":"#eef3ff"),n&&(n.forEach(o=>{o.style.display=l?"block":"none"}),c.forEach(o=>{o.style.display=l?"none":"block"}))}const i=a.querySelectorAll(".tab-emi-calc"),r=a.querySelectorAll(".tab-eligibility-calc"),v=a.querySelectorAll(".emicalculator.commoncalculator"),b=a.querySelectorAll(".eligibilitycalculator.commoncalculator"),E=a.querySelector(".first-head"),m=a.querySelector(".second-head"),f=a.querySelector(".gst-third-tab");function L(e){const l=i[e].classList.contains("active");i[e].classList.add("active"),r[e].classList.remove("active"),v[e].style.display="block",b[e].style.display="none",l==!1&&C(v[e]),m&&(m.style.display="block",E.style.display="block")}function q(e){const l=r[e].classList.contains("active");r[e].classList.add("active"),i[e].classList.remove("active"),b[e].style.display="block",v[e].style.display="none",l==!1&&C(b[e]),m&&(E.style.display="block",m.style.display="block")}function D(e){const l=a.querySelectorAll(".onetab");l[e].style.display="none"}function N(e){const l=a.querySelectorAll(".onetab");l[e].style.display="block"}i[0]&&i[0].addEventListener("click",()=>{L(0),f&&f.classList.remove("active")}),i[1]&&i[1].addEventListener("click",()=>{L(1)}),f&&f.addEventListener("click",()=>{r[0].classList.remove("active"),i[0].classList.remove("active"),f.classList.add("active"),b[0].style.display="block",v[0].style.display="none"}),r[0]&&r[0].addEventListener("click",()=>{q(0),f&&f.classList.remove("active")}),r[1]&&r[1].addEventListener("click",()=>{q(1)}),a.querySelectorAll(".slider-value").forEach(e=>{const l=e.dataset.slider,t=a.querySelector(`#${l}`),{calInput:A}=t.dataset;e.value=u(t.value),t.addEventListener("input",()=>{p(),e.value=u(t.value)}),e.addEventListener("focusout",function(){let s=parseFloat(e.value.replaceAll(",",""))||0;const n=parseFloat(t.min),c=parseFloat(t.max);s<n&&(s=n),s>c&&(s=c),t.value=s,this.dataset.calInput==="roi"?e.value=parseFloat(s):e.value=u(s),p(),e.dispatchEvent(new Event("change",{bubbles:!0}))});function p(){const s=(t.value-t.min)/(t.max-t.min)*100;t.style.background=`linear-gradient(90deg, #da4d34 ${s}%, #dbd7d8 ${s}%)`}t.dispatchEvent(new Event("input"));function u(s){const n=s;return isNaN(Number(n))?0:w(n)}e.addEventListener("input",function(s){let c=e.value.replace(/[^\d.]/g,"");const d=this.dataset.calInput;let o=c;c=String(c),d==="roi"?o=o:d==="tenure"?o=c.replace(/\./g,"").replaceAll(",",""):o=u(o),e.value=o}),e.addEventListener("change",function(s){let c=e.value.replace(/[^\d.]/g,"");const d=this.dataset.calInput,o=parseFloat(t.min),T=parseFloat(t.max);c<o&&(c=o),c>T&&(c=T);let y=String(c);d==="roi"?y=y:d==="tenure"?y=y.replace(/\./g,"").replaceAll(",",""):y=u(y),e.value=y,t.value=c,p()})})}
