import"../../scripts/aem.min.js";import{decoratePlaceholder as l}from"../../scripts/scripts.min.js";import{decodeHtmlSymbols as p}from"../../scripts/common.min.js";import{mobileHeaderAnalytics as c}from"./code-analytics.min.js";import{decorateTable as f}from"./table.min.js";export default async function u(n){if(n.innerHTML=await l(n),n.classList.contains("table"))return f(n),n;const i=p(n.children[0]?.querySelector("p")?.innerHTML.trim()||"");if(n.innerHTML="",i){const r=document.createElement("div");r.innerHTML=i,r.querySelectorAll("tr").forEach(function(m,s){Array.from(m.children).forEach(function(e){if(!s){e.remove();const t=document.createElement("th");t.innerHTML=e.innerHTML,m.append(t)}if(e.innerHTML.includes("img")&&e.textContent.trim()){const t=document.createElement("p"),a=document.createElement("span");a.append(e.textContent.trim()),t.append(e.querySelector("img")),t.append(a),e.innerHTML="",e.append(t)}else if(e.innerHTML.includes("img")){const t=e.querySelector("img");e.innerHTML="",e.append(t)}else e.innerHTML=e.innerHTML})}),n.append(r)}n.querySelectorAll("iframe").length!=0&&n.parentElement.classList.add("iframe-width"),n.querySelectorAll("img").forEach(r=>{const o=new URL(r.src);r.src=o.pathname}),c(n)}
