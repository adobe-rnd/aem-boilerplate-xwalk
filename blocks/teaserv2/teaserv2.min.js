import{ctaClick as q,ctaClickInteraction as _}from"../../dl.min.js";import{autoLinkLangPath as j}from"../../scripts/aem.min.js";import{targetObject as H}from"../../scripts/scripts.min.js";import"../../scripts/common.min.js";import{loanProductsAnalytics as $}from"./teaserv2-analytics.min.js";export default async function F(t){const g=Array.from(t.children,e=>e.firstElementChild),l=renderTeaserHTMLFactory(g,t);t.innerHTML="",t.append(l),$(t),t.closest(".section.neeyat-banner")&&(t.querySelector("a").target="_blank");try{t.closest(".support-contact-us-wrapper")&&t.querySelector("a").getAttribute("href")&&t.querySelector("a").addEventListener("click",e=>{const n={};n.click_text=e.target.textContent.trim(),n.cta_position="Redirection",_(n)})}catch(e){console.warn(e)}if(t.closest(".calculator-section-wrapper")){const e=t.querySelector("a"),n=e.querySelector(".button-container-text");let m;n.addEventListener("click",r=>{m=r.currentTarget.textContent.trim().toLowerCase();const o=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,i=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,p=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();q(p,i,o,H.pageName)}),e.addEventListener("click",r=>{if(m!="try now"){const o=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,i=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,p=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();q(p,i,o,H.pageName)}})}}export function renderTeaserHTMLFactory(t,g){const l=window.matchMedia("(min-width: 768px)"),e=window.matchMedia("(max-width: 767px)"),[n,m,r,o,i,p,f,I,M,h,k,A]=t,c=(P,S,L)=>{const b=document.createElement(P);return S&&(b.className=S),L&&(b.innerHTML=L||""),b},E=n?.textContent.trim()||"",a=document.createElement("a");a.href=E||"javascript:void(0)";let u=m?.querySelector("picture > img")?.src||"",d=A?.querySelector("picture > img")?.src||"";const v=M?.textContent.trim()?.src||"",s=c("div","bg-image");g?.closest(".section").classList.contains("corporate-financing-banner-wrapper")&&(l.matches?u=u.split("?")[0]:e.matches&&(d=d.split("?")[0])),l.matches?u&&(s.style.backgroundImage=`url(${u})`):e.matches&&d&&(s.style.backgroundImage=`url(${d})`),v&&(s.style.backgroundColor=v);const T=r?.querySelector("picture"),C=c("div","front-image");T&&C.append(T);const D=c("div","title",o?.textContent.trim()||""),N=c("div","description",i?.textContent.trim()||"");let x="";const y=I?.querySelector("a")||"";y?(y.innerText=f?.textContent.trim()||"",x=y.outerHTML):f&&(x=c("div","button-container-text",f?.textContent.trim()||""));const w=document.createElement("div");w.innerHTML=k?.innerHTML||"",w.classList.add("rte-text-description"),s.append(C,D,N,x,w);const B=h?.textContent?.trim()||"";return h.closest(".teaserv2-wrapper")?.setAttribute("data-teaserv2-xf",B),a.tagName==="A"&&(a.append(s),j(a)),a}
